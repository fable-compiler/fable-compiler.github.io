<html class="has-navbar-fixed-top" lang="en"><head><title>Fable · Using JSX in your Fable React Apps</title><meta http-equiv="content-type" content="text/html; charset=UTF-8" charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" type="text/css" href="/style.css"/><script src="https://unpkg.com/scroll-into-view-if-needed@2.2.28/umd/scroll-into-view-if-needed.min.js"></script></head><body><nav class="navbar is-fixed-top is-spaced"><div class="container"><div class="navbar-brand"><a class="navbar-item title is-4" href="https://fable.io/">Fable</a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/docs">Documentation</a><a class="navbar-item is-hidden-mobile" href="/packages/">Packages</a><a class="navbar-item is-hidden-mobile" href="/repl/">Try</a><a class="navbar-item is-active" href="/blog/index.html">Blog</a><a class="navbar-item is-hidden-mobile" href="/community.html">Community</a><a class="navbar-item is-hidden-mobile" href="/resources.html">Resources</a><div class="navbar-item navbar-burger-dots is-hidden-tablet"><svg height="4" stroke="none" viewBox="0 0 22 4" width="22"><circle cx="2" cy="2" r="2"></circle><circle cx="2" cy="2" r="2" transform="translate(9,0)"></circle><circle cx="2" cy="2" r="2" transform="translate(18,0)"></circle></svg></div></div><div class="navbar-end is-hidden-mobile"><a class="navbar-item" href="https://github.com/fable-compiler/fable"><span class="icon"><i class=" fab fa-github fa-lg"></i></span></a><a class="navbar-item" href="https://twitter.com/FableCompiler"><span class="icon"><i class=" fab fa-twitter fa-lg"></i></span></a><a class="navbar-item" href="https://gitter.im/fable-compiler/Fable"><span class="icon"><i class=" fab fa-gitter fa-lg"></i></span></a><a class="navbar-item" href="https://www.youtube.com/channel/UC6m70Jyr65ogDySbK7aMmzg/videos"><span class="icon"><i class=" fab fa-youtube fa-lg"></i></span></a></div></div><div class="nacara-navbar-menu"><a class="nacara-navbar-menu-item" href="/packages/">Packages</a><a class="nacara-navbar-menu-item" href="/repl/">Try</a><a class="nacara-navbar-menu-item" href="/community.html">Community</a><a class="nacara-navbar-menu-item" href="/resources.html">Resources</a><a class="nacara-navbar-menu-item" href="https://github.com/fable-compiler/fable">Github</a><a class="nacara-navbar-menu-item" href="https://twitter.com/FableCompiler">Twitter</a><a class="nacara-navbar-menu-item" href="https://gitter.im/fable-compiler/Fable">Gitter</a><a class="nacara-navbar-menu-item" href="https://www.youtube.com/channel/UC6m70Jyr65ogDySbK7aMmzg/videos">Youtube</a></div></div></nav><div class="grey-overlay"></div><div class="nacara-content"><div class="container"><div class="columns"><div class="column is-8-desktop is-offset-2-desktop"><div class="section blog-post"><figure class="image is-96x96 author-image"><img class="is-rounded" src="https://github.com/alfonsogarciacaro.png"/></figure><h2 class="title is-size-3 has-text-primary has-text-weight-normal has-text-centered blog-title">Using JSX in your Fable React Apps</h2><div class="tags has-addons is-justify-content-center"><a class="tag is-rounded is-medium is-primary" href="https://twitter.com/alfonsogcnunez">Alfonso García-Caro</a><span class="tag is-rounded is-medium">October 12, 2022</span></div><div class="content"><style class=grvsc-styles>.grvsc-container{overflow:auto;position:relative;-webkit-overflow-scrolling:touch;padding-top:1rem;padding-top:var(--grvsc-padding-top,var(--grvsc-padding-v,1rem));padding-bottom:1rem;padding-bottom:var(--grvsc-padding-bottom,var(--grvsc-padding-v,1rem));border-radius:8px;border-radius:var(--grvsc-border-radius,8px);font-feature-settings:normal;line-height:1.4}.grvsc-code{display:table}.grvsc-line{display:table-row;box-sizing:border-box;width:100%;position:relative}.grvsc-line>*{position:relative}.grvsc-gutter-pad{display:table-cell;padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem))/ 2)}.grvsc-gutter{display:table-cell;-webkit-user-select:none;-moz-user-select:none;user-select:none}.grvsc-gutter::before{content:attr(data-content)}.grvsc-source{display:table-cell;padding-left:1.5rem;padding-left:var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem));padding-right:1.5rem;padding-right:var(--grvsc-padding-right,var(--grvsc-padding-h,1.5rem))}.grvsc-source:empty::after{content:' ';-webkit-user-select:none;-moz-user-select:none;user-select:none}.grvsc-gutter+.grvsc-source{padding-left:.75rem;padding-left:calc(var(--grvsc-padding-left,var(--grvsc-padding-h,1.5rem))/ 2)}.grvsc-has-line-highlighting>.grvsc-code>.grvsc-line::before{content:' ';position:absolute;width:100%}.grvsc-line-diff-add::before{background-color:var(--grvsc-line-diff-add-background-color,rgba(0,255,60,.2))}.grvsc-line-diff-del::before{background-color:var(--grvsc-line-diff-del-background-color,rgba(255,0,20,.2))}.grvsc-line-number{padding:0 2px;text-align:right;opacity:.7}.atom-one-light{background-color:#fafafa;color:#383a42}.atom-one-light .mtki{font-style:italic}.atom-one-light .mtk14{color:#a626a4}.atom-one-light .mtk1{color:#383a42}.atom-one-light .mtk9{color:#4078f2}.atom-one-light .mtk5{color:#e45649}.atom-one-light .mtk4{color:#c18401}.atom-one-light .mtk7{color:#a0a1a7}.atom-one-light .mtk10{color:#50a14f}.atom-one-light .mtk6{color:#986801}.atom-one-light .mtk8{color:#0184bc}.atom-one-light .grvsc-line-highlighted::before{background-color:var(--grvsc-line-highlighted-background-color,rgba(0,0,0,.05));box-shadow:inset var(--grvsc-line-highlighted-border-width,4px) 0 0 0 var(--grvsc-line-highlighted-border-color,rgba(0,0,0,.2))}</style><p>In a <a href=2022-06-06-Snake_Island_alpha.html>previous post</a> we announced the incoming JSX support in Fable 4. This was originally intended for integration with <a href=https://www.solidjs.com/>SolidJS</a>, which can transform JSX during compilation into reactive and perfomant JS code. Most of the existing Fable web apps though, use <a href=https://reactjs.org/>React</a> instead, the framework that originally introduced the <a href=https://reactjs.org/docs/introducing-jsx.html>JSX dialect</a> as a way to better declare UIs in JavaScript. However, when we first wrote the Fable React adapters we didn't feel the need to integrate JSX in F# for several reasons:<ul><li>JSX was just sugar syntax and actual React apps were just JS code at the end<li>Fable cannot modify the F# language, and extending the F# syntax is a big undertake<li>F# is already expressive enough to create UI APIs, like the original Fable.React or <a href=https://zaid-ajaj.github.io/Feliz/>Feliz</a></ul><p>Nonetheless, since F# added support for string interpolation, we've been exploring ways to embed languages and we had great success integrating F# and HTML with <a href=https://fable.io/Fable.Lit/>Fable.Lit</a>, including <a href="https://marketplace.visualstudio.com/items?itemName=alfonsogarciacaro.vscode-template-fsharp-highlight">editor support</a>. Since JSX is very similar to HTML, why not give it a try too?<p>Today we're pleased to announce these experiments have been successful and with the latest release of Fable 4 (4.0.0-theta-011 at the time of writing) it's possible to use JSX to write your React components directly in F#. The <a href="https://marketplace.visualstudio.com/items?itemName=alfonsogarciacaro.vscode-template-fsharp-highlight">F# Template Highlighting</a> VS Code extension has also been udpated to provide syntax highlighting and autocompletion. Moreover, you don't need to change your existing code to integrate JSX into your app: it is 100% compatible with the current React types and libraries.</p><img src=./jsx-react.webp style="max-width:40rem;margin:2rem auto;display:block"><blockquote><p>The interpolation "holes" must follow the JSX syntax rules, that is, they can only appear in attribute value or child positions.</blockquote><p>In order to use JSX make sure your app fulfills the following:<ul><li>Use fable tool 4.0.0-theta-011 or higher<li>Use Fable.Core package 4.0.0-theta-005 or higher<li>JS bundler can compile JSX (e.g. with Vite, use <code>@vitejs/plugin-react</code>)<li>Use .jsx extension to activate JSX compilation (pass <code>-e .jsx</code> CLI argument to Fable)</ul><blockquote><p>If you use <code>Feliz.ReactComponent</code> plugin, remember to add Feliz.CompilerPlugins package 2.0.0-prerelease-003 or higher to when upgrading to Fable 4.</blockquote><p>Although the new <code>JSX.Element</code> type from Fable.Core and <code>ReactElement</code> for Fable.React are different types, in React apps they are just the same. So you may want to add some helpers to convert between <code>JSX.Element</code> and <code>ReactElement</code>, or to integrate some code in the JSX holes. For example:<pre class="atom-one-light grvsc-container"data-index=0 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk14>open</span><span class=mtk1> </span><span class=mtk9>Fable.Core</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>open</span><span class=mtk1> </span><span class=mtk9>Feliz</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>let inline</span><span class=mtk1> </span><span class=mtk5>toJsx</span><span class=mtk1> </span><span class=mtk14>(</span><span class=mtk1>el</span><span class=mtk14>:</span><span class=mtk1> </span><span class=mtk4>ReactElement</span><span class=mtk14>)</span><span class=mtk1> </span><span class=mtk14>:</span><span class=mtk1> </span><span class=mtk4>JSX.Element </span><span class=mtk14>=</span><span class=mtk1> unbox el</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>let inline</span><span class=mtk1> </span><span class=mtk5>toReact</span><span class=mtk1> </span><span class=mtk14>(</span><span class=mtk1>el</span><span class=mtk14>:</span><span class=mtk1> </span><span class=mtk4>JSX.Element</span><span class=mtk14>)</span><span class=mtk1> </span><span class=mtk14>:</span><span class=mtk1> </span><span class=mtk4>ReactElement </span><span class=mtk14>=</span><span class=mtk1> unbox el</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class="mtk7 mtki">/// Enables use of Feliz styles within a JSX hole</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>let inline</span><span class=mtk1> </span><span class=mtk5>toStyle</span><span class=mtk1> </span><span class=mtk14>(</span><span class=mtk1>styles</span><span class=mtk14>:</span><span class=mtk1> </span><span class=mtk4>IStyleAttribute list</span><span class=mtk14>)</span><span class=mtk1> </span><span class=mtk14>:</span><span class=mtk1> </span><span class=mtk4>obj </span><span class=mtk14>=</span><span class=mtk1> JsInterop.createObj </span><span class=mtk14>(</span><span class=mtk1>unbox styles</span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>toClass</span><span class=mtk1> </span><span class=mtk14>(</span><span class=mtk1>classes</span><span class=mtk14>:</span><span class=mtk1> </span><span class=mtk14>(</span><span class=mtk4>string </span><span class=mtk14>*</span><span class=mtk4> bool</span><span class=mtk14>) </span><span class=mtk4>list</span><span class=mtk14>)</span><span class=mtk1> </span><span class=mtk14>:</span><span class=mtk1> </span><span class=mtk4>string </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    classes</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>|></span><span class=mtk1> List.choose </span><span class=mtk14>(fun</span><span class=mtk1> </span><span class=mtk14>(</span><span class=mtk1>c</span><span class=mtk14>,</span><span class=mtk1> b</span><span class=mtk14>)</span><span class=mtk1> </span><span class=mtk14>-></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>match</span><span class=mtk1> c.Trim</span><span class=mtk14>(),</span><span class=mtk1> b </span><span class=mtk14>with</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>|</span><span class=mtk1> </span><span class=mtk10>""</span><span class=mtk14>,</span><span class=mtk1> </span><span class=mtk14>_</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>|</span><span class=mtk1> </span><span class=mtk14>_,</span><span class=mtk1> </span><span class=mtk6>false</span><span class=mtk1> </span><span class=mtk14>-></span><span class=mtk1> None</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>|</span><span class=mtk1> c</span><span class=mtk14>,</span><span class=mtk1> </span><span class=mtk6>true</span><span class=mtk1> </span><span class=mtk14>-></span><span class=mtk1> Some c</span><span class=mtk14>)</span><span class=mtk1>        </span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>|></span><span class=mtk1> String.concat </span><span class=mtk10>" "</span></span></span></code></pre><p>The basics helpers from Fable.Core that you use for JSX are:<ul><li><code>JSX.Component</code> attribute: decorates function that will be called as JSX components. Works similarly to <a href=https://zaid-ajaj.github.io/Feliz/#/Feliz/React/StatelessComponents>Feliz ReactComponent</a>.<li><code>JSX.Element</code> type: returned by <code>JSX.jsx</code> and other helpers. In React apps, it's the same as <code>ReactElement</code>.<li><code>JSX.jsx</code> function: compiles a literal string template as JSX.</ul><blockquote><p>Check the <code>Fable.Core.JSX</code> module for additional helpers</blockquote><h2>3rd Party React Components</h2><p>One of the most interesting applications of JSX is to integrate 3rd party React components without having to write any binding at all. Feliz already provided <a href=https://zaid-ajaj.github.io/Feliz/#/Feliz/UsingJsx>a way to easily interop with JSX components</a> but it involved a separate .jsx file. Now you can integrate 3rd party JSX components directly into your F# code! Fable even adds a "hack" to allow you have imports within the JSX expression. Fable will automatically extract the import and move it to the top of the file (just remember to escape the braces so F# doesn't interpret it as an interpolation hole).<p>For example, <a href=https://shoelace.style/>Shoelace</a> provides many useful components. Say you want to use the <a href=https://shoelace.style/components/qr-code>QR Code generator</a>, you can check their sample and use it as-is in your code.<pre class="atom-one-light grvsc-container"data-index=1 data-language=fsharp><code class=grvsc-code><span class=grvsc-line><span class=grvsc-source><span class=mtk8>[&#60ReactComponent>]</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>QrCode</span><span class=mtk6>()</span><span class=mtk1> </span><span class=mtk14>=</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>let</span><span class=mtk1> </span><span class=mtk5>value</span><span class=mtk14>,</span><span class=mtk1> setValue </span><span class=mtk14>=</span><span class=mtk1> Hooks.useState</span><span class=mtk14>(</span><span class=mtk10>"https://fable.io/"</span><span class=mtk14>)</span><span class=mtk1> </span><span class=mtk14>|></span><span class=mtk1> asTuple</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    React.fragment </span><span class=mtk14>[</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        Html.input </span><span class=mtk14>[</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            prop.className </span><span class=mtk10>"input mb-5"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            prop.type' </span><span class=mtk10>"text"</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            prop.autoFocus </span><span class=mtk6>true</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            prop.value </span><span class=mtk14>(</span><span class=mtk1>value</span><span class=mtk14>)</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            prop.onTextChange setValue</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>]</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        Html.div </span><span class=mtk14>[</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>            toReact </span><span class=mtk14>&#60|</span><span class=mtk1> JSX.jsx $</span><span class=mtk10>"""</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk10>            import {{ SlQrCode }} from "@shoelace-style/shoelace/dist/react"</span></span></span>
<span class=grvsc-line><span class=grvsc-source></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk10>            &#60SlQrCode value={value} radius="0.5">&#60/SlQrCode></span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk10>            """</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>        </span><span class=mtk14>]</span></span></span>
<span class=grvsc-line><span class=grvsc-source><span class=mtk1>    </span><span class=mtk14>]</span></span></span></code></pre><hr><p>You can check <a href=https://github.com/alfonsogarciacaro/fable-react-sample/tree/6cdfa0acda587d4b051c88234d790b4dfcdd9276>this example</a> to quickly test JSX integration. Just clone the repository and run <code>npm install &#38&#38 npm start</code> to launch a development server, and try editing the code in TodoMVC.fs to see the web contents updated on the fly. Please give it a try and let us know what you think!<p>And if you want to see a fully fledged Fable app using JSX and <a href=2022-10-13-use-elmish.html>Fable.React.UseElmish</a>, check this <a href=https://github.com/Bearle/django_private_chat2/blob/d821f8fcf47265ffc2a2f2f52b8293cfa3fbf82f/example/frontend/src/App.fs>chat app</a> by <a href=https://twitter.com/DelnegOfficial>Denis</a>.<p>In a <a href=2022-10-18-fable-solid.html>future post</a>, we'll discuss JSX with Fable <a href=https://www.solidjs.com/>SolidJS</a> apps. Thanks for reading so far and happy coding!</div></div></div></div></div></div><script async="" src="/resources/nacara-standard-layouts/scripts/menu.js"></script></body></html>